<div class="title" *ngIf="appointment === 'edit'"><h2>Редактирование заметки</h2></div>
<div class="title" *ngIf="appointment === 'create'">
    <h2>Создание заметки</h2>
</div>
<button class="go-back-btn" mat-flat-button color="primary" (click)="handleBackClick()">На главную</button>
<form class="form" [formGroup]="noteForm" (submit)="handleSaveClick()">
    <!-- <div class="form-group">
        <label>Ведите текст заметки</label>
        <div contenteditable="true" [innerHTML]="text | tags"></div>
    </div> -->
    <mat-form-field class="form-group" class="example-full-width" appearance="fill">
        <mat-label>Ведите текст заметки</mat-label>
        <textarea matInput formControlName="text" (change)="handleInputChange()"></textarea>
    </mat-form-field>
    <div class="note-tags-wrapper">
        <mat-chip-list #tagsList>
            <mat-basic-chip class="note-tag" disableRipple="true" *ngFor="let tag of tags"
                >{{ tag | removeHash }}
                <button class="note-tag-btn" (click)="deleteTag(tag)">
                    <mat-icon class="note-tag-icon">cancel</mat-icon>
                </button>
            </mat-basic-chip>
            <input
                placeholder="Добавьте новый тег..."
                #tagInput
                formControlName="tags"
                [matChipInputFor]="tagsList"
                (matChipInputTokenEnd)="addTag($event.value)"
            />
        </mat-chip-list>
    </div>
    <div class="form-group controls">
        <button class="save-btn" mat-flat-button color="primary" type="submit" [disabled]="noteForm.invalid">
            <mat-icon>save</mat-icon>
        </button>
        <button
            *ngIf="appointment === 'edit'"
            class="remove-btn"
            mat-flat-button
            color="warn"
            type="button"
            (click)="handleDeleteClick()"
        >
            <mat-icon>delete</mat-icon>
        </button>
    </div>
</form>
