"use strict";(self.webpackChunktest_task=self.webpackChunktest_task||[]).push([[770],{9770:(O,h,u)=>{u.r(h),u.d(h,{NoteBoardModule:()=>I});var c=u(6895),p=u(9685),t=u(4650),f=u(5135),g=u(9764),C=u(4859),x=u(7392),m=u(4988),T=u(4144),d=u(4006);let v=(()=>{class n{transform(e="",o=[]){let a=[];return e.split(" ").forEach(i=>{i.startsWith("#")&&o.includes(i)&&(i=`<span class="tag">${i}</span>`),a.push(i)}),a.join(" ")}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275pipe=t.Yjl({name:"tags",type:n,pure:!0}),n})();var N=u(5166);function b(n,r){1&n&&(t.TgZ(0,"div",16)(1,"h2"),t._uU(2,"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"),t.qZA()())}function _(n,r){1&n&&(t.TgZ(0,"div",16)(1,"h2"),t._uU(2,"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u0437\u0430\u043c\u0435\u0442\u043a\u0438"),t.qZA()())}function B(n,r){1&n&&(t.TgZ(0,"mat-label"),t._uU(1,"\u0414\u043b\u0438\u043d\u0430 \u0442\u0435\u043a\u0441\u0442\u0430 \u0434\u043e\u043b\u0436\u043d\u0430 \u0431\u044b\u0442\u044c \u0432 \u0434\u0438\u0430\u043f\u0430\u0437\u043e\u043d\u0435 1-360 \u0441\u0438\u043c\u0432\u043e\u043b\u043e\u0432!"),t.qZA())}function M(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"mat-basic-chip",17),t._uU(1),t.ALo(2,"removeHash"),t.TgZ(3,"button",18),t.NdJ("click",function(){const s=t.CHM(e).$implicit,i=t.oxw();return t.KtG(i.deleteTag(s))}),t.TgZ(4,"mat-icon",19),t._uU(5,"cancel"),t.qZA()()()}if(2&n){const e=r.$implicit;t.xp6(1),t.hij("",t.lcZ(2,1,e)," ")}}function y(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.handleDeleteClick())}),t.TgZ(1,"mat-icon"),t._uU(2,"delete"),t.qZA()()}}const Z=[{path:"",component:(()=>{class n{constructor(e,o,a){this.getNotesService=e,this.router=o,this.cdr=a,this.text="",this.tags=[],this.appointment="create",this.startTags=[],this.curNote={text:"",tags:[]}}ngOnInit(){const e=this.getNotesService.currentNote;e&&(this.curNote=e,this.text=this.curNote.text,this.tags=this.curNote.tags),this.text?.split(" ").forEach(o=>{o.startsWith("#")&&this.startTags?.push(o)}),this.appointment=this.getNotesService.appointment}ngAfterViewChecked(){this.cdr.detectChanges()}addTag(e){this.tags.includes(e)||this.tags.push(e)}handleBackClick(){this.router.navigate(["notes"])}deleteTag(e){const o=this.text?.split(" "),a=[];o?.forEach(l=>{l===e&&(l=l.slice(1)),a.push(l)}),this.text=a.join(" ");const s=this.tags.indexOf(e),i=this.startTags.indexOf(e);s<this.tags.length-1?(this.tags=[...this.tags.slice(0,s),...this.tags.slice(s+1)],this.startTags=[...this.tags.slice(0,i),...this.tags.slice(i+1)]):(this.tags=[...this.tags.slice(0,s)],this.startTags=[...this.tags.slice(0,i)])}handleDeleteClick(){this.getNotesService.delete(),this.router.navigate(["notes"])}handleInputChange(e){const o=e.split(" "),a=[];o.forEach(s=>{s.startsWith("#")&&s.length>1&&a.push(s)}),this.startTags.forEach(s=>{a.includes(s)||this.deleteTag(s)}),a.forEach(s=>{this.addTag(s)}),this.startTags=a}handleTextareaInput(e){this.text=e}handleKeyDown(e,o){"Enter"===e.key?(e.preventDefault(),o.blur(),this.handleInputChange(o.value)):"Tab"===e.key?e.preventDefault():" "===e.key&&this.handleInputChange(o.value)}handleSaveClick(){const e=Object.assign({text:this.text});e.tags=this.tags,this.getNotesService.save(e),this.router.navigate(["notes"])}compare(e){let o=!1,a=!1;return e===this.curNote.text&&(o=!0),this.tags.length===this.curNote.tags.length&&(a=!0,this.tags.forEach(s=>{this.curNote.tags.includes(s)||(a=!1)})),o&&a}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(f.t),t.Y36(p.F0),t.Y36(t.sBO))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-note-board"]],decls:24,vars:12,consts:[["class","title",4,"ngIf"],["mat-flat-button","","color","primary",1,"go-back-btn",3,"click"],[1,"form",3,"submit"],["appearance","fill",1,"example-full-width"],[4,"ngIf"],["matInput","","maxlength","361",1,"form-group-textarea",3,"value","input","keydown","blur"],["textarea",""],["contenteditable","true",1,"form-group-text",3,"innerHTML"],[1,"note-tags-wrapper"],["tagsList",""],["class","note-tag","disableRipple","true",4,"ngFor","ngForOf"],["placeholder","\u0414\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u043d\u043e\u0432\u044b\u0439 \u0442\u0435\u0433...",3,"matChipInputFor","matChipInputTokenEnd"],["tagInput",""],[1,"form-group","controls"],["mat-flat-button","","color","primary","type","submit",1,"save-btn",3,"disabled"],["class","remove-btn","mat-flat-button","","color","warn","type","button",3,"click",4,"ngIf"],[1,"title"],["disableRipple","true",1,"note-tag"],[1,"note-tag-btn",3,"click"],[1,"note-tag-icon"],["mat-flat-button","","color","warn","type","button",1,"remove-btn",3,"click"]],template:function(e,o){if(1&e){const a=t.EpF();t.YNc(0,b,3,0,"div",0),t.YNc(1,_,3,0,"div",0),t.TgZ(2,"button",1),t.NdJ("click",function(){return o.handleBackClick()}),t._uU(3,"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"),t.qZA(),t.TgZ(4,"form",2),t.NdJ("submit",function(){return o.handleSaveClick()}),t.TgZ(5,"mat-form-field",3)(6,"mat-label"),t._uU(7,"\u0412\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438. "),t.YNc(8,B,2,0,"mat-label",4),t.qZA(),t.TgZ(9,"textarea",5,6),t.NdJ("input",function(){t.CHM(a);const i=t.MAs(10);return t.KtG(o.handleTextareaInput(i.value))})("keydown",function(i){t.CHM(a);const l=t.MAs(10);return t.KtG(o.handleKeyDown(i,l))})("blur",function(){t.CHM(a);const i=t.MAs(10);return t.KtG(o.handleInputChange(i.value))}),t.qZA(),t._UZ(11,"div",7),t.ALo(12,"tags"),t.qZA(),t.TgZ(13,"div",8)(14,"mat-chip-list",null,9),t.YNc(16,M,6,3,"mat-basic-chip",10),t.TgZ(17,"input",11,12),t.NdJ("matChipInputTokenEnd",function(i){return o.addTag(i.value)}),t.qZA()()(),t.TgZ(19,"div",13)(20,"button",14)(21,"mat-icon"),t._uU(22,"save"),t.qZA()(),t.YNc(23,y,3,0,"button",15),t.qZA()()}if(2&e){const a=t.MAs(10),s=t.MAs(15);t.Q6J("ngIf","edit"===o.appointment),t.xp6(1),t.Q6J("ngIf","create"===o.appointment),t.xp6(7),t.Q6J("ngIf",a.value.length<1||a.value.length>360),t.xp6(1),t.Q6J("value",o.text),t.xp6(2),t.Q6J("innerHTML",t.xi3(12,9,o.text,o.tags),t.oJD),t.xp6(5),t.Q6J("ngForOf",o.tags),t.xp6(1),t.Q6J("matChipInputFor",s),t.xp6(3),t.Q6J("disabled",a.value.length<1||a.value.length>360||o.compare(a.value)),t.xp6(3),t.Q6J("ngIf","edit"===o.appointment)}},dependencies:[c.sg,c.O5,g.qn,g.HS,g.oH,C.lW,x.Hw,m.KE,m.hX,T.Nt,d._Y,d.JL,v,N.a],styles:[".title[_ngcontent-%COMP%]{display:flex;justify-content:center}.go-back-btn[_ngcontent-%COMP%]{margin-left:8%}.form[_ngcontent-%COMP%]{width:80%;padding:1.5rem;margin:0 auto;background-color:#f5f5f5;display:flex;flex-direction:column;justify-content:center}.form-group.controls[_ngcontent-%COMP%]{margin-top:3rem;display:flex;justify-content:space-between}.form-group-textarea[_ngcontent-%COMP%]{height:3rem;color:transparent;resize:none;position:relative;z-index:1}.form-group-text[_ngcontent-%COMP%]{position:absolute;z-index:0;top:.25em;height:3rem;width:100%;animation:cdk-text-field-autofill-end 0s 1ms;padding:2px 0;margin:-2px 0;background-attachment:scroll;outline:none}.note-tags-wrapper[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:.5rem 1.5rem 0}.note-tag[_ngcontent-%COMP%]{display:inline-flex;padding:7px 12px;border-radius:16px;align-items:center;cursor:default;min-height:32px;height:1px;background-color:#e0e0e0;color:#000000de;margin:.3rem}.note-tag-btn[_ngcontent-%COMP%]{cursor:pointer;display:flex;padding:0;margin-left:.5rem}.note-tag-btn[_ngcontent-%COMP%]:hover   .note-tag-icon[_ngcontent-%COMP%]{color:#fc7373}.note-tag-icon[_ngcontent-%COMP%]{color:silver;width:18px;height:18px;font-size:18px;transition:all .3s}.delete-btn[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s}.delete-btn[_ngcontent-%COMP%]:hover{color:#fe6d6d}"]}),n})()},{path:"**",redirectTo:""}];let A=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.Bz.forChild(Z),p.Bz]}),n})();var k=u(898),E=u(4466);let I=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.ez,A,k.q,d.UX,E.m]}),n})()}}]);